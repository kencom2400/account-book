---
name: 機能要件
about: 新機能の実装や機能拡張の要望
title: '[FEATURE] '
labels: ['feature']
assignees: ''
---

## 📋 機能概要

<!-- 実装する機能の概要を簡潔に記述してください -->

## 🎯 目的・背景

<!-- なぜこの機能が必要なのか、どのような課題を解決するのかを記述してください -->

## 📚 機能要件ID

<!-- 該当する機能要件があれば記載してください -->

- 機能要件: FR-XXX
- 参照ドキュメント: [リンク](../docs/functional-requirements/)

## 👤 ユーザーストーリー

<!-- ユーザーの視点から、この機能をどのように使うかを記述してください -->

**As a** (ユーザー種別)  
**I want** (実現したいこと)  
**So that** (目的・理由)

### 例

**As a** 資産管理アプリのユーザー  
**I want** 月次の収支をグラフで確認したい  
**So that** 支出の傾向を視覚的に把握できる

## ✨ 機能詳細

### 主要機能

<!-- 実装する主要な機能を記載してください -->

1.
2.
3.

### 画面・UI要素

<!-- 必要な画面やUI要素を記載してください -->

#### 画面構成

- [ ] 新規画面作成:
- [ ] 既存画面への追加:
- [ ] コンポーネント作成:

#### UI要素

- [ ] ボタン:
- [ ] フォーム:
- [ ] テーブル/リスト:
- [ ] グラフ/チャート:
- [ ] モーダル/ダイアログ:
- [ ] その他:

### APIエンドポイント

<!-- 必要なAPIエンドポイントを記載してください -->

#### Backend API

| メソッド | エンドポイント | 説明 | リクエスト | レスポンス |
| -------- | -------------- | ---- | ---------- | ---------- |
| GET      | `/api/xxx`     |      |            |            |
| POST     | `/api/xxx`     |      |            |            |
| PUT      | `/api/xxx`     |      |            |            |
| DELETE   | `/api/xxx`     |      |            |            |

#### Request/Response例

**Request:**

```json
{
  "key": "value"
}
```

**Response:**

```json
{
  "status": "success",
  "data": {}
}
```

### データモデル

<!-- 必要なデータモデルやスキーマを記載してください -->

```typescript
interface Example {
  id: string;
  name: string;
  // ...
}
```

### ビジネスロジック

<!-- 実装が必要なビジネスロジックを記載してください -->

1.
2.
3.

## 📐 設計方針

### アーキテクチャ

- [ ] Frontend (Next.js)
- [ ] Backend (NestJS)
- [ ] Database (JSON/SQLite/PostgreSQL)
- [ ] External API
- [ ] 共有ライブラリ

### オニオンアーキテクチャの層

- [ ] Domain層（エンティティ、ドメインロジック）
- [ ] Application層（ユースケース、サービス）
- [ ] Infrastructure層（リポジトリ、外部連携）
- [ ] Presentation層（コントローラー、ビュー）

### 技術スタック

- Frontend:
- Backend:
- Database:
- ライブラリ:

## ✅ 受入基準（Acceptance Criteria）

<!-- この機能が「完了」とみなされる条件を具体的に記載してください -->

### 機能要件

- [ ]
- [ ]
- [ ]

### UI/UX要件

- [ ] レスポンシブデザインに対応している
- [ ] アクセシビリティ基準を満たしている
- [ ] ローディング状態を適切に表示する
- [ ] エラー状態を適切に表示する

### 非機能要件

- [ ] パフォーマンス: ページ読み込み3秒以内
- [ ] セキュリティ: 適切な認証・認可を実装
- [ ] データ検証: 入力バリデーションを実装
- [ ] エラーハンドリング: 適切なエラー処理を実装

## 🎨 デザイン・モックアップ

<!-- デザインやモックアップがあれば添付してください -->

### ワイヤーフレーム

### デザインモック

### 参考UI

-

## 🧪 テスト方針

### テストケース

<!-- 実装すべきテストケースを記載してください -->

#### 単体テスト（Unit Test）

- [ ]
- [ ]

#### 統合テスト（Integration Test）

- [ ]
- [ ]

#### E2Eテスト（End-to-End Test）

- [ ]
- [ ]

### テストシナリオ

**シナリオ1: 正常系**

1. 前提条件:
2. 操作:
3. 期待結果:

**シナリオ2: 異常系**

1. 前提条件:
2. 操作:
3. 期待結果:

## 📦 実装タスク

<!-- 実装に必要な具体的なタスクをチェックリストで記載 -->

### Phase 1: 設計・準備

- [ ] 詳細設計書の作成
  - [ ] README.md（必須）
  - [ ] クラス図（必須）
  - [ ] シーケンス図（必須）
  - [ ] 入出力設計（必須）
  - [ ] 画面遷移図（画面がある場合）
  - [ ] 状態遷移図（複雑な状態管理がある場合）
  - [ ] バッチ処理詳細（バッチ処理がある場合）
- [ ] データモデルの定義
- [ ] API仕様書の作成
- [ ] UI/UXデザインの確定
- [ ] 設計レビュー完了

### Phase 2: Backend実装

- [ ] エンティティの作成
- [ ] リポジトリの実装
- [ ] サービスの実装
- [ ] コントローラーの実装
- [ ] バリデーションの実装
- [ ] 単体テストの作成

### Phase 3: Frontend実装

- [ ] コンポーネントの作成
- [ ] ページの作成
- [ ] API連携の実装
- [ ] 状態管理の実装
- [ ] スタイリングの実装
- [ ] 単体テストの作成

### Phase 4: 統合・テスト

- [ ] Frontend-Backend統合
- [ ] 統合テストの実施
- [ ] E2Eテストの実施
- [ ] 動作確認

### Phase 5: ドキュメント・リリース

- [ ] APIドキュメントの更新
- [ ] ユーザーマニュアルの作成（必要な場合）
- [ ] リリースノートの作成
- [ ] デプロイ準備

---

## 📝 実装の流れ

### ⭐ 重要: 実装開始前に詳細設計書を作成してください

FEATUREチケットの実装では、コードを書き始める前に詳細設計書を作成します。

#### 詳細設計書の作成手順

1. **テンプレートをコピー**

   ```bash
   # 新しい機能のディレクトリを作成
   mkdir -p docs/detailed-design/FR-XXX_feature-name

   # テンプレートをコピー
   cp docs/detailed-design/TEMPLATE/*.template docs/detailed-design/FR-XXX_feature-name/

   # .templateを削除してリネーム
   cd docs/detailed-design/FR-XXX_feature-name
   for file in *.template; do
     mv "$file" "${file%.template}"
   done
   ```

2. **必須セクションを作成**（すべてのFEATUREで必須）
   - [ ] README.md: 設計書の概要とアーキテクチャ
   - [ ] class-diagrams.md: クラス構造
   - [ ] sequence-diagrams.md: 処理フロー
   - [ ] input-output-design.md: API仕様

3. **推奨セクションを作成**（必要に応じて）
   - [ ] screen-transitions.md: 画面遷移（画面がある場合）
   - [ ] state-transitions.md: 状態管理（複雑な状態がある場合）

4. **オプションセクションを作成**（必要に応じて）
   - [ ] batch-processing.md: バッチ処理（バッチ処理がある場合）

5. **設計レビューを受ける**
   - 設計書を作成したら、PRまたはIssueコメントでレビューを依頼
   - レビュー承認後に実装を開始

#### 参考資料

- [詳細設計書ガイドライン](../docs/development/detailed-design-guideline.md)
- [テンプレート](../docs/detailed-design/TEMPLATE/)
- [参考例: FR-001-005](../docs/detailed-design/FR-001-005_institution-integration/)

## 🔗 関連情報

### 関連Issue

<!-- 関連する他のIssueがあれば記載 -->

- Blocked by: #
- Blocks: #
- Related to: #

### 依存関係

<!-- この機能が依存する他の機能やライブラリ -->

-

### 参考資料

<!-- 参考になるドキュメントやリンク -->

- [機能要件書](../docs/functional-requirements/)
- [システム構成要件書](../docs/system-architecture.md)
-

## ⚠️ 制約・注意事項

<!-- 実装時の制約や注意すべき点があれば記載 -->

### 技術的制約

-

### ビジネス制約

-

### セキュリティ上の注意

-

## 📅 スケジュール

- 見積もり工数: <!-- 例: 5人日 -->
- 開始予定日:
- 完了予定日:

## 🔮 将来的な拡張

<!-- 将来的に追加したい機能や改善案があれば記載 -->

-

## 📝 メモ

<!-- その他、メモや補足情報 -->

---

## 🏆 Definition of Done

<!-- この機能が「完全に完了」とみなされる条件 -->

- [ ] すべての受入基準を満たしている
- [ ] すべてのテストがパスしている（単体、統合、E2E）
- [ ] コードレビューが完了している
- [ ] ドキュメントが更新されている
- [ ] Linter/Formatterが通っている
- [ ] セキュリティチェックが完了している
- [ ] パフォーマンステストが完了している
- [ ] 本番環境で動作確認が完了している

---

## 📊 進捗管理（実装中に更新）

### 進捗率

- [ ] 0% - 未着手
- [ ] 25% - 設計完了
- [ ] 50% - Backend実装完了
- [ ] 75% - Frontend実装完了
- [ ] 100% - テスト・リリース完了

### 作業ログ

#### YYYY-MM-DD

<!-- 作業内容や気づいた点を記録 -->

-

### ブロッカー

<!-- 実装を妨げている問題があれば記録 -->

-
