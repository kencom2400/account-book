{
  "title": "[REFACTOR] Cursorルールファイルの統合と整理",
  "labels": ["documentation", "refactor", "priority: medium"],
  "body": "## 📋 概要\n\n`.cursor/rules/`ディレクトリに、番号付きルールファイル（`XX-*.md`）のフォーマットに従っていない野良ルールファイルが存在します。\n\nこれらはGeminiのフィードバックから得られた重要な知見ですが、汎用的なルールに統合することで、保守性と検索性を向上させます。\n\n---\n\n## 🎯 目的\n\n- **情報の一元化**: 同じトピックの情報を1つのルールファイルに集約\n- **検索性の向上**: 番号付きファイル構造により、必要な情報を素早く見つけられる\n- **保守性の向上**: ルールの更新・追加が容易になる\n- **情報量の維持**: 既存の情報を削除せず、適切な場所に移動\n\n---\n\n## 📂 対象ファイル\n\n### 1. `GIT-WORKFLOW-ENFORCEMENT.md`\n\n**現在の内容**:\n- mainブランチでの直接作業禁止\n- PRなしでのmainへのマージ禁止\n- PRマージ前のIssue Done変更禁止\n- トラブルシューティング手順\n\n**統合先**: `.cursor/rules/03-git-workflow.md`\n\n**統合方針**:\n- 絶対禁止事項を明確化するセクションを追加\n- トラブルシューティングセクションを拡充\n- チェックリストを統合\n\n---\n\n### 2. `learned-from-gemini-perf-review.md`\n\n**現在の内容**:\n- 型安全性の維持（ESLint設定、インライン無効化）\n- パフォーマンス測定の精度向上（Date.now vs performance.now vs process.hrtime.bigint）\n- 非同期処理の待機ロジック（固定sleep vs ポーリング+タイムアウト）\n- フロントエンドパフォーマンステスト\n- レガシーAPIの使用回避\n- テストセレクターの一貫性\n- ページネーションテストの前提条件\n- CI/CD設定の最新化\n- コード重複の回避とDRY原則\n- ドキュメントの可読性と一貫性\n- 命名規則の一貫性\n\n**統合先**:\n- `.cursor/rules/02-code-standards.md` - 型安全性、テスト実装、DRY原則\n- `.cursor/rules/05-ci-cd.md` - 非同期処理、パフォーマンス測定、CI/CD設定\n\n**統合方針**:\n- 02: 「テスト実装ガイドライン」セクションにパフォーマンステストのベストプラクティスを追加\n- 02: 「ESLint設定のベストプラクティス」セクションを拡充\n- 05: パフォーマンス測定の精度向上セクションを追加\n- 05: 非同期処理の待機ロジックのベストプラクティスを追加\n\n---\n\n### 3. `learned-from-issue-279.md`\n\n**現在の内容**:\n- Geminiレビューから学んだこと:\n  - エラーメッセージの文字列依存は脆弱（カスタムエラークラス推奨）\n  - 不要な依存関係の削除\n  - Enum値と使用箇所の型統一\n  - 特定のエラーによるステータス上書き防止\n- テスト実装の教訓:\n  - テストの動作確認必須\n  - テストの冗長性排除\n  - Factory関数でテストデータ作成を簡潔に\n- 型安全性の重要性\n- コードレビューの活用\n- ドキュメント管理\n\n**統合先**: `.cursor/rules/02-code-standards.md`\n\n**統合方針**:\n- 「エラーハンドリング」セクションを新設\n- 「テスト実装ガイドライン」セクションを拡充\n- 「依存関係管理」セクションを追加\n- 「Enum型の設計」セクションを追加\n\n---\n\n## 📋 作業内容\n\n### Phase 1: 統合先ファイルのバックアップ\n\n```bash\ncp .cursor/rules/02-code-standards.md .cursor/rules/02-code-standards.md.backup\ncp .cursor/rules/03-git-workflow.md .cursor/rules/03-git-workflow.md.backup\ncp .cursor/rules/05-ci-cd.md .cursor/rules/05-ci-cd.md.backup\n```\n\n### Phase 2: 各ファイルの統合\n\n#### 2-1. `GIT-WORKFLOW-ENFORCEMENT.md` → `03-git-workflow.md`\n\n**追加セクション**:\n- 「🚨 絶対禁止事項（CRITICAL）」を冒頭に追加\n- 「トラブルシューティング」セクションを拡充\n\n#### 2-2. `learned-from-gemini-perf-review.md` の統合\n\n**02-code-standards.md への追加**:\n- セクション9: パフォーマンステストのベストプラクティス\n- セクション10: ESLint設定の拡充（型安全性の厳密化）\n- セクション11: テストセレクターの一貫性\n- セクション12: DRY原則とコード重複の回避\n\n**05-ci-cd.md への追加**:\n- セクション5: パフォーマンス測定の精度向上\n- セクション6: 非同期処理の待機ロジック\n- セクション7: CI/CD設定の最新化\n\n#### 2-3. `learned-from-issue-279.md` → `02-code-standards.md`\n\n**追加セクション**:\n- セクション13: カスタムエラークラスによる型安全なエラーハンドリング\n- セクション14: 不要な依存関係の削除\n- セクション15: Enum値とリテラル型の一貫性\n- セクション16: ステータス上書き防止（エラーハンドリング）\n- テスト実装ガイドラインの拡充（既存セクション4に統合）\n\n### Phase 3: 野良ファイルの削除\n\n統合完了後、元のファイルを削除：\n\n```bash\nrm .cursor/rules/GIT-WORKFLOW-ENFORCEMENT.md\nrm .cursor/rules/learned-from-gemini-perf-review.md\nrm .cursor/rules/learned-from-issue-279.md\n```\n\n### Phase 4: `.cursorrules` の更新\n\n削除されたファイルへの参照を削除し、統合先ファイルの説明を更新。\n\n---\n\n## ✅ 期待される効果\n\n### 1. 検索性の向上\n\n- 番号付きファイル構造により、目的のルールを素早く見つけられる\n- 関連する情報が1つのファイルに集約される\n\n### 2. 保守性の向上\n\n- ルールの追加・更新が容易になる\n- 重複情報が減り、一貫性が保たれる\n\n### 3. 情報量の維持\n\n- 既存の情報を削除せず、適切な場所に移動\n- Geminiレビューからの学びが適切に体系化される\n\n### 4. ワークフローの明確化\n\n- 絶対禁止事項が明確になる\n- トラブルシューティング手順が充実する\n\n---\n\n## 📊 優先度\n\n**Medium**: ルールの整理は重要だが、機能実装や既存のバグ修正を優先\n\n---\n\n## 🔗 関連ドキュメント\n\n- `.cursor/rules/00-WORKFLOW-CHECKLIST.md` - ワークフロー全体\n- `.cursor/rules/02-code-standards.md` - コード品質基準\n- `.cursor/rules/03-git-workflow.md` - Gitワークフロー\n- `.cursor/rules/05-ci-cd.md` - CI/CD設定\n\n---\n\n## 📝 チェックリスト\n\n- [ ] Phase 1: バックアップ作成\n- [ ] Phase 2-1: `GIT-WORKFLOW-ENFORCEMENT.md` を `03-git-workflow.md` に統合\n- [ ] Phase 2-2: `learned-from-gemini-perf-review.md` を `02-code-standards.md` と `05-ci-cd.md` に統合\n- [ ] Phase 2-3: `learned-from-issue-279.md` を `02-code-standards.md` に統合\n- [ ] Phase 3: 野良ファイル削除\n- [ ] Phase 4: `.cursorrules` の更新\n- [ ] 全ルールファイルのリンク確認\n- [ ] 情報の欠落がないか最終確認\n"
}

