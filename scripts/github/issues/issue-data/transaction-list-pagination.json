{
  "title": "[FEATURE] 取引履歴一覧画面にページネーション機能を追加",
  "labels": ["feature", "frontend", "backend", "api", "priority: medium", "size: M"],
  "body": "## 概要\n\n取引履歴一覧画面（Issue #108で実装）にページネーション機能を追加します。現在はすべての取引を一度に取得・表示していますが、大量のデータがある場合にパフォーマンスの問題が発生する可能性があるため、ページネーション機能を実装します。\n\n## 背景\n\n### 現状の問題点\n\n- Issue #108で実装した取引履歴一覧画面は、すべての取引を一度に取得・表示している\n- 取引数が増加すると、以下の問題が発生する可能性がある：\n  - APIレスポンス時間の増加\n  - フロントエンドでのレンダリング時間の増加\n  - メモリ使用量の増加\n  - ユーザー体験の低下\n\n### 目指す姿\n\n- ページネーション機能により、必要なデータのみを取得・表示する\n- パフォーマンスの向上\n- ユーザー体験の向上\n\n## 実装内容\n\n### Phase 1: バックエンドAPI実装\n\n#### 1.1 UseCaseの拡張\n\n- `GetTransactionsUseCase`にページネーション機能を追加\n- クエリパラメータ: `page`, `limit`\n- レスポンスにページネーション情報を含める\n\n#### 1.2 Repositoryメソッドの追加\n\n- `ITransactionRepository`にページネーション対応のメソッドを追加\n- `findAllWithPagination()`, `count()` などのメソッド\n\n#### 1.3 Controllerの拡張\n\n- `TransactionController.findAll()`にページネーション対応\n- レスポンス形式:\n  ```typescript\n  {\n    success: boolean;\n    data: TransactionJSONResponse[];\n    pagination: {\n      page: number;\n      limit: number;\n      total: number;\n      totalPages: number;\n      hasNext: boolean;\n      hasPrev: boolean;\n    };\n  }\n  ```\n\n#### 1.4 DTOの追加\n\n- `GetTransactionsQueryDto`に`page`, `limit`を追加\n- バリデーション: `page >= 1`, `limit >= 1 && limit <= 100`\n\n### Phase 2: フロントエンド実装\n\n#### 2.1 APIクライアントの拡張\n\n- `getTransactions()`にページネーションパラメータを追加\n- レスポンス型にページネーション情報を含める\n\n#### 2.2 ページネーションUIコンポーネントの実装\n\n- ページネーションコンポーネントの作成（または既存コンポーネントの使用）\n- ページ番号表示\n- 前へ/次へボタン\n- ページサイズ選択（10件、20件、50件、100件など）\n\n#### 2.3 取引一覧ページの修正\n\n- `apps/frontend/src/app/transactions/page.tsx`の修正\n- ページネーション状態の管理\n- ページ変更時のデータ取得\n- フィルタリングとページネーションの連携\n\n### Phase 3: テスト・ドキュメント\n\n#### 3.1 バックエンドテスト\n\n- ユニットテスト（UseCase、Repository）\n- E2Eテスト（APIエンドポイント）\n- エッジケースのテスト（ページ番号が範囲外、limitが範囲外など）\n\n#### 3.2 フロントエンドテスト\n\n- ユニットテスト（コンポーネント、APIクライアント）\n- E2Eテスト（ページネーション操作）\n\n## 作業チェックリスト\n\n### Phase 1: バックエンドAPI実装\n- [ ] `GetTransactionsUseCase`の拡張\n- [ ] `ITransactionRepository`インターフェースの拡張\n- [ ] Repository実装の追加\n- [ ] `TransactionController`の修正\n- [ ] `GetTransactionsQueryDto`の拡張\n- [ ] バリデーションの追加\n- [ ] ユニットテストの追加\n- [ ] E2Eテストの追加\n\n### Phase 2: フロントエンド実装\n- [ ] APIクライアントの拡張\n- [ ] ページネーションUIコンポーネントの実装\n- [ ] 取引一覧ページの修正\n- [ ] フィルタリングとページネーションの連携\n- [ ] レスポンシブデザイン対応\n- [ ] ユニットテストの追加\n- [ ] E2Eテストの追加\n\n### Phase 3: テスト・ドキュメント\n- [ ] すべてのテストがパスする\n- [ ] ドキュメントの更新（必要に応じて）\n- [ ] 動作確認\n\n## 受入基準\n\n- [ ] バックエンドAPIがページネーション機能をサポートしている\n- [ ] フロントエンドでページネーションUIが表示される\n- [ ] ページ変更時に正しくデータが取得される\n- [ ] フィルタリングとページネーションが連携して動作する\n- [ ] エッジケース（最後のページ、空の結果など）が適切に処理される\n- [ ] レスポンシブデザインに対応している\n- [ ] すべてのテストがパスする\n- [ ] Lintエラーがない\n- [ ] パフォーマンスが改善されている（必要に応じて）\n\n## 技術的な詳細\n\n### バックエンド\n\n- **使用技術**: NestJS, TypeORM（またはJSON Repository）\n- **参考実装**: `GetSyncHistoryUseCase`（`apps/backend/src/modules/sync/application/use-cases/get-sync-history.use-case.ts`）\n- **レスポンス形式**: `PaginatedResponse<T>`型（`libs/types/src/api.types.ts`）\n\n### フロントエンド\n\n- **使用技術**: Next.js, React, TypeScript\n- **ページネーションコンポーネント**: 既存のコンポーネントがある場合は使用、なければ新規作成\n- **状態管理**: `useState`でページ番号とページサイズを管理\n\n### 実装例（参考）\n\n**バックエンド（UseCase）**:\n\n```typescript\nasync execute(query: GetTransactionsQuery & { page?: number; limit?: number }): Promise<PaginatedResponse<TransactionEntity>> {\n  const page = query.page || 1;\n  const limit = query.limit || 20;\n  const offset = (page - 1) * limit;\n\n  const [transactions, total] = await Promise.all([\n    this.transactionRepository.findWithPagination(query, limit, offset),\n    this.transactionRepository.count(query),\n  ]);\n\n  return {\n    items: transactions,\n    pagination: {\n      page,\n      limit,\n      total,\n      totalPages: Math.ceil(total / limit),\n      hasNext: page < Math.ceil(total / limit),\n      hasPrev: page > 1,\n    },\n  };\n}\n```\n\n**フロントエンド（ページコンポーネント）**:\n\n```typescript\nconst [page, setPage] = useState(1);\nconst [limit, setLimit] = useState(20);\nconst [pagination, setPagination] = useState<Pagination | null>(null);\n\nconst loadTransactions = useCallback(async (): Promise<void> => {\n  const result = await getTransactions({ ...params, page, limit });\n  setTransactions(result.items);\n  setPagination(result.pagination);\n}, [page, limit, ...params]);\n```\n\n## 関連Issue\n\n- Issue #108 - [TASK] E-2: 取引履歴一覧画面の実装\n\n## 見積もり工数\n\n2〜3日\n\n## 備考\n\n- 既存の`GetSyncHistoryUseCase`の実装を参考にする\n- フィルタリング機能（Issue #108で実装済み）とページネーションの連携に注意する\n- パフォーマンステストを実施し、改善を確認する"
}
