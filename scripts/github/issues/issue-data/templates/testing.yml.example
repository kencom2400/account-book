# テスト関連用テンプレート
title: "[testing] テスト実装・改善の内容"
labels:
  - testing
  - backend  # または frontend
  - priority: high  # または medium, low
  - size: M  # XS, S, M, L, XL

body: |
  ## 概要
  テスト実装・改善の概要を簡潔に記載します。

  ## 背景
  なぜこのテストが必要なのかを記載します。

  ### 現状の問題点
  - テストカバレッジが低い
  - E2Eテストが不足している
  - テストが不安定
  - テスト実行時間が長い

  ### 目指す姿
  - 十分なテストカバレッジ
  - 安定したテスト実行
  - 効率的なテスト実行

  ## 対象範囲
  ### テストタイプ
  - [ ] ユニットテスト
  - [ ] 統合テスト
  - [ ] E2Eテスト
  - [ ] パフォーマンステスト
  - [ ] セキュリティテスト

  ### 対象機能
  - 機能A
  - 機能B
  - 機能C

  ## 実装内容

  ### Phase 1: テスト設計
  #### 1.1 テストケース設計
  - 正常系のテストケース
  - 異常系のテストケース
  - 境界値のテストケース

  #### 1.2 テストデータ設計
  - テストデータの準備方法
  - テストフィクスチャの設計

  ### Phase 2: ユニットテスト実装
  #### 2.1 サービス層のテスト
  具体的なテスト内容

  #### 2.2 コントローラー層のテスト
  具体的なテスト内容

  #### 2.3 リポジトリ層のテスト
  具体的なテスト内容

  ### Phase 3: 統合テスト実装
  #### 3.1 API統合テスト
  具体的なテスト内容

  #### 3.2 データベース統合テスト
  具体的なテスト内容

  ### Phase 4: E2Eテスト実装
  #### 4.1 ユーザーシナリオテスト
  具体的なテスト内容

  #### 4.2 エラーハンドリングテスト
  具体的なテスト内容

  ### Phase 5: CI/CD統合
  #### 5.1 テスト自動化
  CI/CDパイプラインへの統合

  #### 5.2 テストレポート
  テスト結果の可視化

  ## テストフレームワーク
  - ユニットテスト: Jest
  - E2Eテスト: Playwright / Cypress
  - APIテスト: Supertest
  - モック: jest.mock / sinon

  ## 作業チェックリスト

  ### Phase 1: テスト設計
  - [ ] テストケースの洗い出し
  - [ ] テストデータの設計
  - [ ] モック・スタブの設計

  ### Phase 2: ユニットテスト実装
  - [ ] サービス層のテスト実装
  - [ ] コントローラー層のテスト実装
  - [ ] リポジトリ層のテスト実装
  - [ ] ユーティリティ関数のテスト実装

  ### Phase 3: 統合テスト実装
  - [ ] API統合テストの実装
  - [ ] データベース統合テストの実装
  - [ ] 外部サービス統合テストの実装

  ### Phase 4: E2Eテスト実装
  - [ ] ユーザーシナリオテストの実装
  - [ ] エラーハンドリングテストの実装
  - [ ] パフォーマンステストの実装

  ### Phase 5: CI/CD統合
  - [ ] GitHub Actionsへの統合
  - [ ] テストレポートの設定
  - [ ] カバレッジレポートの設定

  ### Phase 6: ドキュメント
  - [ ] テスト実行方法の記載
  - [ ] テストケースのドキュメント化
  - [ ] トラブルシューティングガイド

  ## 受入基準
  - [ ] すべてのテストがパスする
  - [ ] テストカバレッジが目標値以上
  - [ ] テストが安定して実行できる
  - [ ] CI/CDでテストが自動実行される
  - [ ] テストドキュメントが整備されている

  ## テストカバレッジ目標
  ### 現状
  - ユニットテスト: XX%
  - 統合テスト: XX%
  - E2Eテスト: XX%

  ### 目標
  - ユニットテスト: 80%以上
  - 統合テスト: 70%以上
  - E2Eテスト: 主要フロー100%

  ## パフォーマンス要件
  - ユニットテストの実行時間: X分以内
  - E2Eテストの実行時間: X分以内
  - CI/CD全体の実行時間: X分以内

  ## テストデータ管理
  ### セットアップ
  テスト前のデータ準備方法

  ### クリーンアップ
  テスト後のデータ削除方法

  ### フィクスチャ
  共通テストデータの管理方法

  ## 見積もり工数
  - Phase 1-2 (設計・ユニットテスト): 2日
  - Phase 3 (統合テスト): 1日
  - Phase 4 (E2Eテスト): 2日
  - Phase 5-6 (CI/CD・ドキュメント): 1日

  **合計**: 6日

  ## 参考資料
  - [Jest Documentation](https://jestjs.io/)
  - [Playwright Documentation](https://playwright.dev/)
  - [Testing Best Practices](https://testingjavascript.com/)

  ## 備考
  - テストの優先順位を明記（Critical Path優先など）
  - テスト実行環境の要件を記載

